# PetaLinux kernel configuration for YOLOv3 on PYNQ-Z2

# Enable USB video support for webcams
CONFIG_USB_VIDEO_CLASS=y
CONFIG_MEDIA_USB_SUPPORT=y
CONFIG_USB_VIDEO_CLASS_INPUT_EVDEV=y

# Enable V4L2 for video capture
CONFIG_VIDEO_V4L2=y
CONFIG_V4L2_MEM2MEM_DRIVERS=y

# Enable camera sensor support
CONFIG_VIDEO_OV5640=y
CONFIG_VIDEO_OV7670=y
CONFIG_VIDEO_MT9M111=y

# Enable framebuffer and DRM for HDMI output
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_DRM=y
CONFIG_DRM_XLNX=y
CONFIG_DRM_XLNX_ZYNQMP=y
CONFIG_DRM_XLNX_DSI=y

# Enable HDMI support
CONFIG_DRM_XLNX_HDMI=y
CONFIG_DRM_PANEL_SIMPLE=y
CONFIG_DRM_BRIDGE=y

# Enable DMA for video processing
CONFIG_DMA_CMA=y
CONFIG_CMA_SIZE_MBYTES=128

# Enable Xilinx DPU support
CONFIG_XILINX_DPU=y
CONFIG_XILINX_DMATEST=y

# Enable I2C for camera control
CONFIG_I2C=y
CONFIG_I2C_CADENCE=y
CONFIG_I2C_GPIO=y

# Enable SPI for potential camera interfaces
CONFIG_SPI=y
CONFIG_SPI_CADENCE=y
CONFIG_SPI_XILINX=y

# Enable networking for remote access
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_NETDEVICES=y
CONFIG_ETHERNET=y
CONFIG_XILINX_EMACLITE=y
CONFIG_XILINX_AXI_EMAC=y

# Enable USB support
CONFIG_USB=y
CONFIG_USB_SUPPORT=y
CONFIG_USB_COMMON=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_HCD_PLATFORM=y
CONFIG_USB_OHCI_HCD=y
CONFIG_USB_OHCI_HCD_PLATFORM=y
CONFIG_USB_STORAGE=y

# Enable file systems
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_FS=y
CONFIG_MISC_FILESYSTEMS=y
CONFIG_NFS_FS=y
CONFIG_NFS_V3=y
CONFIG_NFS_V4=y
CONFIG_ROOT_NFS=y

# Enable proc and sysfs
CONFIG_PROC_FS=y
CONFIG_SYSFS=y

# Enable systemd (optional)
CONFIG_SYSTEMD=y
CONFIG_SYSTEMD_ANALYZER=y
CONFIG_SYSTEMD_BACKLIGHT=y
CONFIG_SYSTEMD_BUILTIN_INITRD=y
CONFIG_SYSTEMD_CRYPTSETUP=y
CONFIG_SYSTEMD_HWDB=y
CONFIG_SYSTEMD_JOURNAL=y
CONFIG_SYSTEMD_LOGIND=y

# Enable development tools
CONFIG_DEBUG_FS=y
CONFIG_MAGIC_SYSRQ=y
CONFIG_PROC_SYSCTL=y
CONFIG_SYSCTL=y

# Enable sound support (optional)
CONFIG_SOUND=y
CONFIG_SND=y
CONFIG_SND_USB_AUDIO=y

# Enable thermal management
CONFIG_THERMAL=y
CONFIG_THERMAL_OF=y
CONFIG_CPU_THERMAL=y
CONFIG_THERMAL_EMERGENCY_POWEROFF_DELAY_MS=0
CONFIG_THERMAL_HWMON=y
CONFIG_THERMAL_WRITABLE_TRIPS=y
CONFIG_THERMAL_DEFAULT_GOV_STEP_WISE=y
CONFIG_THERMAL_DEFAULT_GOV_FAIR_SHARE=y
CONFIG_THERMAL_GOV_STEP_WISE=y
CONFIG_THERMAL_GOV_FAIR_SHARE=y
CONFIG_THERMAL_GOV_USER_SPACE=y

# Enable watchdog
CONFIG_WATCHDOG=y
CONFIG_XILINX_WATCHDOG=y
CONFIG_SOFT_WATCHDOG=y

# Enable real-time features (optional)
CONFIG_RT_MUTEXES=y
CONFIG_PREEMPT=y
CONFIG_PREEMPT_RT_BASE=y
CONFIG_PREEMPT_RT_FULL=y

# Enable memory management optimizations
CONFIG_ZSMALLOC=y
CONFIG_ZRAM=y
CONFIG_ZBUD=y
CONFIG_Z3FOLD=y
CONFIG_CMA=y
CONFIG_CMA_AREAS=7
CONFIG_CMA_SIZE_MBYTES=128
CONFIG_CMA_SIZE_PERCENTAGE=10
CONFIG_CMA_SIZE_SEL_MBYTES=y
CONFIG_CMA_ALIGNMENT=8
CONFIG_CMA_AREAS=7

# Enable performance monitoring
CONFIG_PERF_EVENTS=y
CONFIG_HW_PERF_EVENTS=y
CONFIG_ARM_PMU=y

# Enable debug symbols (for development)
CONFIG_DEBUG_KERNEL=y
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_INFO_REDUCED=y
CONFIG_DEBUG_INFO_SPLIT=y
CONFIG_DEBUG_INFO_DWARF4=y
CONFIG_GDB_SCRIPTS=y